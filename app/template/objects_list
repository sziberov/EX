<ul _list>
	<? foreach($objects as $object) {
		$object_url = ($object->type_id == 2 ? '/user/'.$object->login : '/'.$object->id).(!empty($referrer_id) ? '?referrer_id='.$referrer_id : '');
	?>
		<li>
			<? if(session_getAccessLevelID($object->id) > 0) { ?>
				<div _grid="v">
					<div _grid="v stacked">
						<b><a href="<?= $object_url; ?>"><?= $object->title; ?></a></b>
						<?
							$hide_author_and_times = filter_var($object->settings['hide_author_and_times']->value ?? null, FILTER_VALIDATE_BOOLEAN);

							if(!$hide_author_and_times) {
								$template = new Template('user');
								$template->user = $object->user;
								$template->primary_time = $object->creation_time;
								$template->render(true);
							}
						?>
					</div>
					<? if(!empty($object->description)) { ?>
						<div _description="short"><?= template_parseBB($object->description); ?></div>
					<? }
					if($object->inclusions_count+$object->files_count+$object->comments_count > 0) { ?>
						<div _properties>
							<? if($object->inclusions_count > 0) { ?>
								<div>
									<div><?= D['string_inclusions_count']; ?></div>
									<div><?= $object->inclusions_count; ?></div>
								</div>
							<? } ?>
							<? if($object->files_count > 0) { ?>
								<div>
									<div><?= D['string_files_count']; ?></div>
									<div><?= $object->files_count; ?></div>
								</div>
							<? } ?>
							<? if($object->comments_count > 0) { ?>
								<div>
									<div><?= D['string_comments_count']; ?></div>
									<div><?= $object->comments_count; ?></div>
								</div>
							<? } ?>
						</div>
					<? }
					/*if(session() && isset($object->user) && session_getSettings()['login'] == $object->user->login) { ?>
						<div _grid="h">
							<a _button href="/edit/<?= $object->object_id; ?>"><?= D['button_edit']; ?></a>
							<button><?= D['button_delete']; ?></button>
							<button><?= D['button_remove']; ?></button>
						</div>
					<? }*/ ?>
				</div>
				<? if(isset($object->poster['url'])) { ?>
					<a href="<?= $object_url; ?>" title="<?= $object->title; ?>">
						<img _image src="<?= $object->poster['url']; ?>">
					</a>
				<? }
			} else {
				echo 'Нет доступа к объекту '.$object->id;
			} ?>
		</li>
	<? } ?>
</ul>
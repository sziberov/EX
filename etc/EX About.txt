О сервисе EX

	Объекты

		Вся динамическая информация на сервисе хранится в виде объектов.

		Любой объект может иметь название, описание, даты создания и редактирования, и настройки.

		Объекты бывают нескольких типов:
		- 1 : Группа. Доступ пользователей (зарегистрированных и нет) к объектам контролируется этим типом.
		- 2 : Пользователь. Функциональная единица, имеющая возможность взаимодействовать с уже имеющимися объектами и создавать новые. Может служить разделом.
		- 3 : Простой. Многофункциональный тип, может быть статьёй, разделом, комментарием, личным сообщением, жалобой, аватаром или шаблоном.
		- 4 : Общий. Статья, удаляющаяся спустя 30 дней неиспользования. Создать, редактировать и удалить её может любой желающий без регистрации.
		- 5 : Событие. Тип, предназначенный для направления пользователям уведомлений о появлении новых связей, так или иначе относящихся к ним.

		Это фундаментальное разделение, указывающее на то, как объект будет обрабатываться системой в первую очередь, а также на возможные варианты связей между ним и другими объектами.

		Некоторые типы объектов могут содержать файлы. При наличии изображений среди загруженных файлов, одно из них будет использоваться как иконка и обложка. По умолчанию автоматически выбирается первое по дате добавления, также по желанию может быть установлено определённое на странице редактирования.

	Доступ

		У всех пользователей и простых объектов существуют уровни доступа:
		- 0 : Нет.
		- 1 : Чтение.
		- 2 : Чтение + Комментирование.
		- 3 : Чтение + Комментирование + Включение.
		- 4 : Редактирование.
		- 5 : Полный.

		Связи доступа настраиваются отдельно для каждой группы. Отсутствие связи приравнивается к отсутствию доступа, а нулевой уровень означает доступ, значимый только для модераторов.

		Уровни доступа 2-3 влияют на возможность создания определённых связей между простыми объектами, в то время как для удаления связей необходимо обладать уровнем 4 или быть их автором.

		По умолчанию из двух возможных уровней доступа пользователя к объекту выбирается меньший. Если у участника группы установлена обратная настройка, он считается модератором. В этом случае уровень его модераторских полномочий равняется его собственному уровню доступа и может повышаться в отношении конкретных простых объектов в группе, чей уровень выше.

		Владельцам групп автоматически назначается полный доступ, предпочтение высшего уровня и возможность приглашать участников, а также запрещается самострел путём изменения этих параметров.

	Связи

		Помимо типов объектов для наиболее конкретного распределения информации на сервисе используются разные типы межобъектных связей:
		- 1 : Доступ: группа <- пользователь, пользователь <- группа, простой <- группа.
		- 2 : Дружба: пользователь <> пользователь.
		- 3 : Рекомендация: пользователь <> пользователь, пользователь <- простой.
		- 4 : Включение: пользователь <- простой, простой <> простой.
		- 5 : Аватар: пользователь <- простой, простой <> простой.
		- 6 : Шаблон: пользователь <- простой, простой <> простой.
		- 7 : Комментарий: пользователь <- простой, простой <- простой.
		- 8 : Жалоба: пользователь <- простой, простой <- простой.
		- 9 : Закладка: пользователь <- простой.
		- 10 : Личное сообщение: пользователь <- простой.
		- 11 : Уведомление: пользователь <- событие.

		Наличие некоторых связей между объектами может запрещать создание других: простой объект, привязанный к другому как комментарий, не может иметь включений и быть включён в другой; личное сообщение не может быть обжаловано или рекомендовано, и т.д.

		Стрелками обозначаются связи как они есть на уровне устройства системы, не следует читать их как инструкцию. Так, например, комментарии хотя и создаются пользователями, но в одном из вариантов привязываются к ним же, поэтому стрелка направлена в сторону пользователя, а не наоборот (то бишь подразумевается комментарий к странице пользователя).

		Помимо межобъектных связей существуют и более простые виды связи:
		- Файловый сервер <- файл.
		- Объект <- файл. Указывает на данные файла и содержит его местное название.

	Настройки

		В целях персонализации и расширения функционала в рамках уже существующей структуры, объекты, межобъектные связи и файлы имеют поле "настройки". Некоторые из них являются рекомендуемыми или обязательными и назначаются сразу в момент создания.

		Настройки объектов по типам:
		- 2 : Пользователь {
			login: <string>,
			password_hash: <string>,
			email: <string>,
			hide_from_search: <boolean>,
			menu: {
				use_personal_menu: <boolean>,
				personal_menu_items: [
					{
						title: <string>,
						url: <string>
					},
					...
				]
			},
			editor_id: <integer>,
			avatar_id: <integer>,
			execute_alien_js: <boolean>,
			notifications: {
				friendship: <boolean>,
				recommendations: <boolean>,
				comments: <boolean>,
				private_messages: <boolean>
			},
			previleges: {
				allow_any_upload_size: <boolean>,
				allow_access_ignoring_groups: <boolean>,
				allow_advanced_control: <boolean>
			}
		}
		- 3 : Простой {
			hide_from_search: <boolean>,
			alias: <string>,
			origin: {
				hide_default_referer: <boolean>,
				hide_author_and_times: <boolean>
			},
			poster_id: <integer>,
			navigation: {
				display_search_bar: <boolean>,
				display_amount: <integer>,
				display_mode_id: <integer>,
				sort_mode_id: <integer>
			},
			hide_file_list: <boolean>,
			restrictions: {
				deny_nonbookmark_inclusion: <boolean>,
				deny_claims: <boolean>
			}
		}
		- 6 : Событие {
			connection_id: <integer>
		}

		Настройки межобъектных связей по типам:
		- 1 : Доступ {
			access_level_id: <integer>,
			prefer_higher_access_level: <boolean>,
			allow_invites: <boolean>,
			awaiting_accept: <boolean>
		}
		- 6 : Шаблон {
			display_mode_id: <integer>
		}

		Настройки файлов:
		{
			length: <integer>,
			format: <string>,
			resolution: [
				<integer>,
				<integer>
			]
		}

	Шаблоны

		По желанию, сервис в целом и отдельные объекты могут отображаться совершенно по-разному. Для этого применяются шаблоны страниц и их частей.

		Существует 4 режима отображения шаблона (расположены в порядке приоритета от высшего к низшему):
		- 1 : Я вижу... Объект отображается в указанном шаблоне только для привязавшего его пользователя.
		- 2 : Все видят... Все пользователи видят объект в указанном шаблоне. Возможно установить, если вы имеете доступ к редактированию.
		- 3 : Я вижу всё... Все объекты и прочие страницы для вас будут отображаться в указанном шаблоне.
		- 4 : Все видят всё моё... Все пользователи будут видеть все ваши объекты, включая вашу страницу, в указанном шаблоне.

		Чтобы создать свой шаблон, нужно создать простой объект и загрузить в него файлы с определёнными названиями и правильным содержанием. Создавать рекомендуется сразу на странице "Шаблоны", потому что это быстрее добавления "в моё". В качестве примера можно обратиться к оригинальному шаблону. Если в указанном шаблоне файла не найдено, он берётся из оригинального шаблона.

		Для удобства подмены изображений можно использовать тэг _ROOT_, вместо него подставляется полный путь к файлу шаблона. То есть после загрузки в шаблон изображения, чтобы её отобразить, можно писать <img src="_ROOT_/image.png">.

	Разделы пользователя

		Каждый пользовательский раздел предназначен для отображения и быстрого управления объектами, связанными с пользователем. Разделение происходит по типам связей.

		Практически все разделы виртуальные и почти все доступны для просмотра только их владельцу, при этом объекты в них могут быть доступны по своим номерам и ссылкам другим пользователям как обычно. Связывать объекты с этими разделами может только пользователь.

		- Страница. Публичный (для просмотра) раздел, для предоставления быстрого доступа к объектам. Страница является реальным объектом (с точки зрения системы - это сам пользователь) и доступна для комментирования и рекомендации.
		- Архив.

		Разделы "Страница пользователя", "Архив" и "Группы" выделяются среди других. Страница пользователя отличается тем, что с точки зрения системы - это сам пользователь, т.е. реальный и публичный раздел, но доступный для включений только его владельцу. Архив же включает в себя все простые объекты без разбора, созданные пользователем, а в группах перечисляются те группы доступа, в которых пользователь состоит.

	Ссылки

		id - Номер объекта.
		fid - Номер файла.
		uid - Номер пользователя.
		utitle - Логин пользователя.

		#id - Просмотр объекта.
		#view/id - Просмотр объекта.
		#view_comments/id - Просмотр комментариев объекта.
		#edit/id - Редактирование объекта.
		#get/fid - Получение файла.
		#user/utitle - Страница пользователя.
		#user_comments/utitle - Комментарии пользователя.
		#user_recommendations/utitle - Рекомендации пользователя.
		#friends_comments/utitle - Комментарии друзей.
		#friends_recommendations/utitle - Рекомендации друзей.
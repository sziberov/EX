<module variables="...=@/app/api/object.php?id\=[hash.path.1];parent=@/app/api/object.php?id\=[hash.parameters.parent_id];inclusions=@/app/api/objects.php?parent_id\=[hash.path.1]&type\=inclusions">
	<condition>
		<if>[parent.id]!=</if>
		<then>
			<title>[title] - [parent.title]</title>
			<!--
			<div _title="small" fallback_>Объект временного хранения #101</div>
			<div _title="small" fallback_>Черновик</div>
			-->
			<div _title="small">
				<a href="#view/[id]">[parent.title]</a>
			</div>
			<div _flex="h" fallback_>
				<button icon_="to_back" disabled_></button>
				<button icon_="to_random" disabled_></button>
				<button icon_="to_forward" disabled_></button>
			</div>
		</then>
		<else>
			<title>[title]</title>
		</else>
	</condition>
	<div _grid="h spaced">
		<div _grid="v">
			<div _title>[title]</div>
			<module title="user"></module>
			<condition>
				<if>[description]!=</if>
				<then>
					<div _description>{!parseBB description}</div>
				</then>
			</condition>
		</div>
		<div _flex="v right">
			<img attributes="_image=([inclusions_count]>0?big:dynamic)" src="[poster_url]" title="[title]">
			<div fallback_>PNG: 2560x1440</div>
		</div>
	</div>
	<condition>
		<if>[inclusions_count]>0</if>
		<then>
			<div _grid="h">
				<select oninput="Hash.set('#view/[id]?mode='+this.value)">
					<option value="cells" attributes="([navigation_mode]!=list?selected:)">[string_as_cells]</option>
					<option value="list" attributes="([navigation_mode]==list?selected:)">[string_as_list]</option>
				</select>
				<select>
					<option selected>[string_by_inclusion_time]</option>
					<option>[string_by_edit_time]</option>
					<option>[string_by_creation_time]</option>
					<option>[string_by_title]</option>
				</select>
				<input size_="medium" name="search" type="text">
				<button>[button_search]</button>
			</div>
			<module title="objects" variables="filters=parent_id\\=[id]&type\\=inclusions;navigation=true;mode=([navigation_mode]==list?list:cells)"></module>
		</then>
	</condition>
	<condition>
		<if>[files_count]>0</if>
		<then>
			<div _table="list" wide_ style="--columns: minmax(192px, auto) repeat(2, minmax(96px, max-content));">
				<div header_>
					<div>
						<div _grid="v stacked">
							<b>[string_files]</b>
							<div _properties>
								<div>
									<div>[string_count]</div>
									<div>2</div>
								</div>
								<div>
									<div>[string_summary_size]</div>
									<div>2,558,625</div>
								</div>
								<a>[link_file_list]</a>
								<a>[link_play_list]</a>
							</div>
						</div>
					</div>
					<div></div>
					<div>
						<button onclick="Viewer.toggleClose()">[button_display_viewer]</button>
					</div>
				</div>
				<div>
					<div>
						<div _icon="floppy"></div>
						<div _grid="v stacked">
							<div fallback_>1</div>
							<a href="#get/[file_id]">background.png</a>
						</div>
					</div>
					<div>
						<img _image src="/storage/example.jpg" onclick="Viewer.toggleClose('image', '1');" title="background.png - Без названия - Видео">
					</div>
					<div _flex="v right" fallback_>
						<b>2,558,625</b>
						<div _flex="v right stacked">
							<div>00:00, 01 января 2019</div>
							<a href="#search?query=md5:c43f10467775456d14013d25fe708b1e">c43f10467775456d14013d25fe708b1e</a>
							<div>PNG: 2560x1440</div>
						</div>
						<div _grid="h">
							<button>[button_download]</button>
							<button onclick="Hash.set('copy/[id]/[file_id]')">[button_copy]</button>
						</div>
						<!--
						<div _grid="h">
							<button>Смотреть на карте</button>
						</div>
						-->
						<div>FS1</div>
					</div>
				</div>
				<div>
					<div>
						<div _icon="floppy"></div>
						<div _grid="v stacked">
							<div fallback_>2</div>
							<a href="#get/2">video.mp4</a>
						</div>
					</div>
					<div>
						<button onclick="Viewer.toggleClose('video', '2')" badge_="22:24">Играть</button>
					</div>
					<div _flex="v right" fallback_>
						<b>386,537,472</b>
						<div _flex="v right stacked">
							<div>12:00, 01 января 2019</div>
							<a href="#search?query=md5:d98035045cd7aa0fc1def68dd19c33e6">d98035045cd7aa0fc1def68dd19c33e6</a>
							<div>44:56, MPEG4: 640x480</div>
						</div>
						<!--<div important_>Файл недоступен</div>-->
						<div _grid="h">
							<button>[button_download]</button>
							<button>[button_torrent]</button>
							<button onclick="Hash.set('copy/[id]/[file_id]')">[button_copy]</button>
						</div>
						<div>FS1</div>
					</div>
				</div>
			</div>
		</then>
	</condition>
	<div _grid="h">
		<button onclick="Hash.set('edit?type=plain&parent_id=[id]')">[button_create_article_in_section]</button>
		<button onclick="Hash.set('upload/[id]')">[button_upload_files_to_section]</button>
		<button onclick="Hash.set('include/[id]')">[button_include_from_bookmarks]</button>
	</div>
	<div _grid="h">
		<button onclick="Hash.set('view_comments/[id]')" badge_="2">[button_comments]</button>
		<button onclick="Button.toggle(this, Request.recommend('[id]'))">[button_recommend]</button>
	</div>
	<div _grid="h">
		<button onclick="Button.toggle(this, Request.my('[id]', 'bookmarks'))">[button_to_bookmarks]</button>
		<button onclick="Hash.set('include_my/[id]')">[button_to_my]</button>
	</div>
	<div>&nbsp;</div>
	<div _grid="h">
		<button onclick="Hash.set('edit/[id]')">[button_edit]</button>
		<button onclick="Request.delete('[id]')">[button_delete]</button>
	</div>
	<div>&nbsp;</div>
	<div _grid="h">
		<button onclick="Claim.toggle()">[button_claim]</button>
		<button onclick="Hash.set('template/[id]')">[button_template]</button>
	</div>
	<div>&nbsp;</div>
	<div _viewer="closed">
		<div _grid="h spaced" __panel>
			<div __title>video.mp4</div>
			<div _grid="h stacked">
				<button icon_="minimize" onclick="Viewer.toggleMinimize()"></button>
				<button icon_="close" onclick="Viewer.toggleClose()"></button>
			</div>
		</div>
		<div __content>
			<img src="/storage/example.jpg">
			<video src="/storage/example.jpg" nocontrols>
		</div>
		<div _grid="h spaced" __panel>
			<div __progress>
				<div __playback></div>
			</div>
			<div _grid="h">
				<button icon_="play"></button>
				<div>0:00 / 0:00</div>
			</div>
			<div _grid="h">
				<button icon_="volume"></button>
				<button icon_="maximize"></button>
				<button icon_="back" disabled_></button>
				<button icon_="forward" disabled_></button>
			</div>
			<button icon_="resize"></button>
		</div>
	</div>
</module>